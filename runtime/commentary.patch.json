{
  "metadata": {
    "timestamp": "2025-09-12T06:45:00Z",
    "annotator": "Resource Runtime Annotator",
    "version": "1.0",
    "schema_version": "1.0",
    "artifact": {
      "file_name": "SOTE.EXE",
      "sha256": "be596ee755afbd4f3a50de366a07866d8dfed032f3341b63f539e5f93773ff77"
    },
    "total_annotations": 12,
    "categories_covered": ["AUDIO", "VIDEO", "FS", "TIMER"]
  },
  "annotations": [
    {
      "file": "src/main.c",
      "line": 95,
      "api": "Registry Configuration",
      "category": "FS",
      "comment": "[RESOURCE:FS] Registry Configuration - Load game settings from Windows registry",
      "provenance": ["RegOpenKeyA/RegQueryValueExA @ imports.ADVAPI32.dll"],
      "resource": "HKEY_CURRENT_USER\\Software\\SOTE"
    },
    {
      "file": "src/main.c",
      "line": 104,
      "api": "DirectDraw Initialization",
      "category": "VIDEO",
      "comment": "[RESOURCE:VIDEO] DirectDraw Initialization - Hardware-accelerated graphics",
      "provenance": ["DirectDrawCreate @ iat=0x4c4cec"],
      "resource": "Primary display adapter, 640x480x8 video mode"
    },
    {
      "file": "src/entry.c",
      "line": 225,
      "api": "DirectDrawCreate",
      "category": "VIDEO",
      "comment": "[RESOURCE:VIDEO] DirectDrawCreate - Initialize DirectDraw subsystem",
      "provenance": ["va=0x401000+", "iat=0x4c4cec", "imports.DDRAW.dll"],
      "resource": "Primary display adapter"
    },
    {
      "file": "src/entry.c",
      "line": 356,
      "api": "timeGetTime",
      "category": "TIMER",
      "comment": "[RESOURCE:TIMER] timeGetTime - High-resolution millisecond timer",
      "provenance": ["va=0x401000+", "iat=0x4c488c", "imports.WINMM.dll"],
      "resource": "System multimedia timer"
    },
    {
      "file": "src/runtime_loaders.c",
      "line": 23,
      "api": "file_open",
      "category": "FS",
      "comment": "[RESOURCE:FS] File Open - CreateFileA replacement",
      "provenance": ["va=0x402100", "CreateFileA @ IAT_0x4c4634"],
      "resource": "Game assets from Sdata/ (BMPs, WAVs, SANs, DLLs)"
    },
    {
      "file": "src/runtime_loaders.c",
      "line": 58,
      "api": "file_read",
      "category": "FS",
      "comment": "[RESOURCE:FS] File Read - ReadFile replacement",
      "provenance": ["va=0x402200", "ReadFile @ IAT_0x4c4c2c"],
      "resource": "Loading asset data into memory"
    },
    {
      "file": "src/runtime_loaders.c",
      "line": 354,
      "api": "dll_archive_load",
      "category": "FS",
      "comment": "[RESOURCE:FS] DLL Archive Loader",
      "provenance": ["LoadLibraryA @ imports.KERNEL32.dll", "va=0x402000"],
      "resource": "data00.dll through data31.dll (34 files) from Sdata/"
    },
    {
      "file": "src/adapter_audio_sdl.c",
      "line": 14,
      "api": "adapter_DirectSoundCreate",
      "category": "AUDIO",
      "comment": "[RESOURCE:AUDIO] DirectSoundCreate Adapter",
      "provenance": ["va=0x401000+", "iat=0x4c4cd0", "runtime.apis.json"],
      "resource": "183 WAV sound effects (1KB-200KB) from Sdata/",
      "adapter": "SDL2_mixer replacement for DirectSound"
    },
    {
      "file": "src/adapter_video_sdl.c",
      "line": 149,
      "api": "adapter_DirectDrawCreate",
      "category": "VIDEO",
      "comment": "[RESOURCE:VIDEO] DirectDrawCreate Adapter",
      "provenance": ["iat=0x4c4cec", "runtime.apis.json"],
      "resource": "Primary graphics adapter, SDL2 renderer",
      "adapter": "SDL2 replacement for DirectDraw"
    },
    {
      "file": "src/adapter_fs_posix.c",
      "line": 33,
      "api": "adapter_CreateFileA",
      "category": "FS",
      "comment": "[RESOURCE:FS] CreateFileA Adapter",
      "provenance": ["iat=0x4c4c20", "runtime.apis.json"],
      "resource": "Asset files from Sdata/ directory",
      "adapter": "POSIX file I/O replacement for Win32"
    },
    {
      "file": "src/adapter_fs_posix.c",
      "line": 81,
      "api": "adapter_ReadFile",
      "category": "FS",
      "comment": "[RESOURCE:FS] ReadFile Adapter",
      "provenance": ["iat=0x4c4c2c", "runtime.apis.json"],
      "resource": "Reading asset data into memory",
      "adapter": "POSIX read replacement for Win32"
    },
    {
      "file": "src/adapter_fs_posix.c",
      "line": 300,
      "api": "adapter_LoadLibraryA",
      "category": "FS",
      "comment": "[RESOURCE:FS] LoadLibraryA Adapter",
      "provenance": ["imports.KERNEL32.dll"],
      "resource": "data00.dll-data31.dll archive loading",
      "adapter": "Custom DLL loader for resource archives"
    }
  ],
  "summary": {
    "by_category": {
      "FS": 7,
      "VIDEO": 3,
      "AUDIO": 1,
      "TIMER": 1
    },
    "by_file": {
      "src/main.c": 2,
      "src/entry.c": 2,
      "src/runtime_loaders.c": 3,
      "src/adapter_audio_sdl.c": 1,
      "src/adapter_video_sdl.c": 1,
      "src/adapter_fs_posix.c": 3
    }
  }
}